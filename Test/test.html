<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<script language="Javascript" src="test.js"></script>
	</head>

	<body>
		
		<textarea id="textDiv" rows="30" cols="150"></textarea><br>
		
		<script>
			var openFile = function(event) {
				
				var input = event.target;
				var reader = new FileReader();
				
				var file = input.files[0];
				
				var toDoOnLoad = function(){
					  var text = reader.result;
					  //~ affiche(count(text,'1'));
					  parse(text);
					  //~ affiche("Parsing done for "+file.name+" !");
				};
				
				var toDoOnLoadStart = function(){
					clear();
					//~ affiche("Starting parsing "+file.name+" !");
				}
				
				var toDoOnProgress = function(){
					//~ affiche("Reading "+file.name+" ...");
				}
				
				reader.onload = toDoOnLoad;
				reader.onloadstart=toDoOnLoadStart;
				reader.onprogress= toDoOnProgress;
				
				reader.readAsText(file);
				
			};
		</script>

	
		<input type='file' onchange='openFile(event)'><br>
		
	</body>

</html>



