<html>

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	</head>

	<body>
		
		<textarea id="textDiv" rows="30" cols="150"></textarea><br>
		
		<script>
			
			//~ Affiche dans la console et dans la textarea la chaine str
			function affiche(str){
				var zoneTexte = document.getElementById("textDiv");
				zoneTexte.textContent=zoneTexte.textContent+"\n"+str+"\n";
				console.log(str);
			}
		
			//~ Compte le nombre d'occurence du caractere char dans la chaine str
			function count(str,char){
				var temp = str;
				var compteur =0;
				for(var i =0;i<str.length;i++){
					if(str.charAt(i)==char){
						compteur++;
					}
				}
				return compteur;
			}
			
			var openFile = function(event) {
				
				var input = event.target;
				var reader = new FileReader();
				
				var file = input.files[0];
				
				var toDoOnLoad = function(){
					  var text = reader.result;
					  affiche(count(text,'1'));
					  affiche("Parsing done for "+file.name+" !");
				};
				
				var toDoOnLoadStart = function(){
					affiche("Starting parsing "+file.name+" !");
				}
				
				var toDoOnProgress = function(){
					affiche("Reading "+file.name+" ...");
				}
				
				reader.onload = toDoOnLoad;
				reader.onloadstart=toDoOnLoadStart;
				reader.onprogress= toDoOnProgress;
				
				reader.readAsText(file);
				
			};
		</script>

	
		<input type='file' accept='text/plain' onchange='openFile(event)'><br>
		
	</body>

</html>



